<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dettaglio Corso – Portale Maker</title>

  <link rel="stylesheet" href="style.css" />

  <!-- ICONS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>

<header>
  <h1>Portale Maker</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="corsi.html">Corsi</a>
    <a href="proponi.html">Proponi</a>
  </nav>
</header>

<div class="container">
  <div id="corso-container">
    <p>Caricamento corso...</p>
  </div>
</div>

<script src="script.js"></script>

<script>
function renderCourseDetail(data) {
  const c = data.fields;

  const img = c.immagine ? c.immagine[0].url : "";
  const indirizzo = c.indirizzo || "";
  const indirizzoEncoded = encodeURIComponent(indirizzo);

  const calendarUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(c.titolo)}&details=${encodeURIComponent(c.descrizione || '')}&location=${indirizzoEncoded}`;

  const whatsappMsg = `Ciao, vorrei informazioni sul corso "${c.titolo}"`;
  const whatsappUrl = `https://wa.me/${c.contatto_tel || ""}?text=${encodeURIComponent(whatsappMsg)}`;

  document.getElementById("corso-container").innerHTML = `

    <div class="course-layout">

      <!-- IMMAGINE SINISTRA -->
      <div class="course-image-box">
        <img src="${img}" alt="${c.titolo}">
      </div>

      <!-- INFO DESTRA -->
      <div class="course-info-box">
        <h2>${c.titolo}</h2>

        <div class="course-field"><i class="fa-solid fa-tags"></i> <strong>${c.categoria || "—"}</strong></div>
        <div class="course-field"><i class="fa-solid fa-user"></i> Età: ${c.eta_min || "?"}–${c.eta_max || "?"}</div>
        <div class="course-field"><i class="fa-solid fa-location-dot"></i> ${indirizzo || "—"}</div>
        <div class="course-field"><i class="fa-solid fa-clock"></i> ${c.orario || "—"}</div>
        <div class="course-field"><i class="fa-solid fa-calendar"></i> ${c.data_inizio || ""} → ${c.data_fine || ""}</div>

        <div class="course-field"><i class="fa-solid fa-envelope"></i> ${c.contatto_email || "—"}</div>

        <a class="btn" href="${whatsappUrl}" target="_blank">
          <i class="fa-brands fa-whatsapp"></i> Contatta su WhatsApp
        </a>

        <br><br>

        <a class="btn" href="${calendarUrl}" target="_blank">
          <i class="fa-solid fa-calendar-plus"></i> Aggiungi al calendario
        </a>
      </div>
    </div>

    <div class="course-description">
      <h3>Descrizione</h3>
      <p>${c.descrizione || "Nessuna descrizione disponibile."}</p>
    </div>
  `;
}
</script>

</body>
</html>
